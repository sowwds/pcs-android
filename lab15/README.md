# Практическая 15: Подготовка к публикации. Ефремов Алексей ЭФБО-10-23

### 1. Краткое описание проекта и назначение приложения

**Название проекта:** Habit Tracker (Трекер Привычек)

**Назначение:** Мобильное приложение для пользователей, которые хотят формировать и отслеживать свои ежедневные привычки. Приложение помогает поддерживать мотивацию, предоставляя визуальную обратную связь о прогрессе (календарь, серии выполнений) и предлагая гибкие способы отслеживания (простые привычки "да/нет" и количественные привычки-счетчики).

### 2. Настройки иконки и splash-экрана

Для генерации иконок и экрана загрузки были использованы пакеты `flutter_launcher_icons` и `flutter_native_splash`.

**Иконка:** В качестве исходника была использована предоставленная иконка `assets/icon.jpg`.

**Фрагмент конфигурации из `pubspec.yaml`:**
```yaml
flutter_launcher_icons:
  android: "launcher_icon"
  ios: true
  image_path: "assets/icon.jpg"
  min_sdk_android: 21

flutter_native_splash:
  color: "#1E1E2E" # Цвет фона из темы Catppuccin Mocha
  image: assets/icon.jpg
  android: true
  ios: true
```
После настройки были выполнены команды `flutter pub run flutter_launcher_icons` и `flutter pub run flutter_native_splash:create` для генерации необходимых файлов.

### 3. Настройка подписи и сборка AAB

Для подготовки к публикации в Google Play была настроена подпись релизных сборок.

1.  **Создание ключа:** Была предоставлена инструкция для создания файла `release-key.jks` с помощью `keytool`.
2.  **Настройка Gradle:** Файл `android/app/build.gradle.kts` был обновлен для использования данных из `android/key.properties` при сборке релиза.

**Фрагмент конфигурации из `build.gradle.kts`:**
```kotlin
    signingConfigs {
        create("release") {
            if (keystorePropertiesFile.exists()) {
                keyAlias = keystoreProperties["keyAlias"] as String
                keyPassword = keystoreProperties["keyPassword"] as String
                storeFile = file(keystoreProperties["storeFile"] as String)
                storePassword = keystoreProperties["storePassword"] as String
            }
        }
    }
    // ...
    buildTypes {
        release {
            signingConfig = signingConfigs.getByName("release")
        }
    }
```
**Сборка AAB:** Была запущена команда `flutter build appbundle --release`. Сборка дошла до этапа подписи (`:app:signReleaseBundle`) и завершилась с ожидаемой ошибкой, так как файлы `release-key.jks` и `key.properties` не были созданы пользователем в рамках сессии. Это подтверждает, что конфигурация подписи настроена корректно и ожидает реального ключа.

### 4. Таблица сопроводительной документации

| Документ                               | Назначение                                  | Основное содержание                                           |
| -------------------------------------- | ------------------------------------------- | ------------------------------------------------------------- |
| `README.md` (в корне проекта)         | Краткое описание проекта для разработчиков  | Назначение, стек, базовая инструкция по запуску               |
| `user_guide.md`                        | Руководство для конечного пользователя      | Пошаговая инструкция по работе с приложением, описание функций |
| `privacy_policy.txt`                   | Политика конфиденциальности (требование сторов) | Объяснение, какие данные собираются и как они используются     |
| `changelog.md`                         | История изменений в проекте                 | Список изменений для каждой версии приложения                 |

### 5. Содержание созданных документов

#### `changelog.md`
```markdown
# Changelog

Все изменения в этом проекте будут задокументированы в этом файле.

## [1.0.0] - 2025-12-04

### Добавлено
- Первоначальный релиз приложения "Трекер Привычек".
- Функционал создания простых привычек ("да/нет") и привычек-счетчиков.
- Отслеживание ежедневного прогресса на главном экране.
- Календарь для просмотра истории выполнений по каждой привычке.
- Расчет текущей и самой длинной серии выполнений.
- Возможность выбора цвета и иконки для каждой привычки.
- Аутентификация пользователя через Email/Пароль с использованием Supabase.
- Глобальная обработка ошибок и пользовательский экран ошибки.
- Подготовка к публикации: созданы иконки, сплэш-экран, настроена подпись для Android.
```

#### `privacy_policy.txt`
```text
**Политика Конфиденциальности для Трекера Привычек**

Дата вступления в силу: 4 декабря 2025 г.

Это приложение ("Трекер Привычек") уважает вашу конфиденциальность. Эта политика объясняет, какие данные мы собираем и как мы их используем.

**1. Собираемые данные**
*   **Данные аутентификации:** Ваш адрес электронной почты и пароль.
*   **Пользовательский контент:** Названия привычек, описания, цвета, иконки, а также история их выполнения.

**2. Использование данных**
Данные используются исключительно для обеспечения работы основных функций приложения и синхронизации между вашими устройствами. Мы не продаем и не передаем ваши данные третьим лицам.

**3. Хранение данных**
Все данные хранятся на защищенных серверах сервиса Supabase.
```

#### `user_guide.md`
```markdown
# Руководство пользователя: Трекер Привычек

### 1. Начало работы: Вход и Регистрация
- **Регистрация:** Введите email, пароль и нажмите "Зарегистрироваться".
- **Вход:** Введите ваш email и пароль, затем нажмите "Войти".

### 2. Главный экран: "Сегодня"
- **Отметить привычку:** Поставьте галочку или используйте кнопки `+` / `-`.
- **Добавить новую:** Нажмите на кнопку `+` в правом нижнем углу.
- **Посмотреть детали:** Нажмите на любую привычку в списке.
- **Редактировать/Удалить:** Сделайте долгое нажатие на привычку.

### 3. Экран деталей привычки
- **Календарь:** Визуально показывает все дни, когда вы выполняли привычку.
- **Статистика:** Просмотр текущей и лучшей серии выполнений.
```

### 6. Вывод

В ходе выполнения работы проект был успешно подготовлен к публикации. Были сгенерированы иконка приложения и сплэш-экран, очищен и настроен манифест Android, а также подготовлена конфигурация для подписи релизных сборок. Создан необходимый пакет сопроводительной документации (`changelog`, `privacy policy`, `user guide`). Процесс выявил несколько сложностей, связанных с адаптацией инструкций для Kotlin DSL и корректной настройкой, которые были успешно решены. Приложение полностью готово к финальной подписи ключом разработчика и последующей загрузке в магазин приложений.